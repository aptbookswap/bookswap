<!-- Modal de creación de libro -->
<div class="modal fade" id="crearLibroModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-xl" style="max-width: 1000px;">
    <div class="modal-content">
      <form method="POST" enctype="multipart/form-data" action="{% url 'crear_libro' %}">
        {% csrf_token %}
        <div class="modal-header">
          <h5 class="modal-title">Agregar nuevo libro</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <div class="row g-4">
            <!-- Columna de imágenes -->
            <div class="col-md-5">
              <label class="form-label">Imágenes</label>
              <input type="file" name="imagenes" id="imagenesInput" class="form-control mb-2" accept="image/*" multiple required>
              <div id="previewContainer" class="d-flex flex-wrap gap-2 mt-2"></div>
            </div>

            <!-- Columna de formulario -->
            <div class="col-md-7">
              <div class="mb-3">
                <label for="titulo" class="form-label">Título</label>
                <input type="text" name="titulo" class="form-control" required>
              </div>
              <div class="mb-3">
                <label for="autor" class="form-label">Autor</label>
                <input type="text" name="autor" class="form-control" required>
              </div>
              <div class="mb-3">
                <label for="estado" class="form-label">Estado</label>
                <select name="estado" class="form-select" required>
                  <option>Perfecto</option>
                  <option>Con detalles</option>
                  <option>Desgastado</option>
                  <option>En malas condiciones</option>
                </select>
              </div>
              <div class="mb-3">
                <label class="form-label">Género</label>
                <select id="generoDropdown" class="form-select">
                  <option value="" disabled selected>Selecciona un género</option>
                  <option value="Fantasía">Fantasía</option>
                  <option value="Misterio">Misterio</option>
                  <option value="Romance">Romance</option>
                  <option value="Finanzas">Finanzas</option>
                  <option value="Terror">Terror</option>
                  <option value="Psicología">Psicología</option>
                  <option value="Otro">Otro</option>
                </select>
                <div id="generoTags" class="tags-container mt-2"></div>
                <input type="hidden" name="genero" id="generoInput">
              </div>
              <div class="mb-3">
                <label for="paginas" class="form-label">Páginas</label>
                <input type="number" name="paginas" class="form-control" required>
              </div>
              <div class="mb-3">
                <label for="cantidad" class="form-label">Cantidad</label>
                <input type="number" name="cantidad" class="form-control" required>
              </div>
            </div>
          </div>
        </div>
        <div class="modal-footer justify-content-end">
          <button type="submit" class="btn btn-primary">Crear libro</button>
        </div>
      </form>
    </div>
  </div>
</div>

<!-- Modales de confirmación reutilizados -->
<div class="modal fade" id="confirmarModificarModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Confirmar cambios</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        ¿Estás seguro de que deseas guardar los cambios en este libro?
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
        <button type="button" class="btn btn-warning" id="confirmarGuardarBtn">Guardar cambios</button>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="confirmarEliminarModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Eliminar libro</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        Esta acción eliminará este libro permanentemente. ¿Deseas continuar?
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
        <button type="button" class="btn btn-danger" id="confirmarEliminarBtn">Confirmar eliminación</button>
      </div>
    </div>
  </div>
</div>
